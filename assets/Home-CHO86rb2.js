import{R as g,j as e,B,r as A}from"./index-BVStvcCx.js";import{S as d,a as h,b as D,u as M}from"./useMarketAssets-BF5keuho.js";const O=g.createContext({}),$=!0;function K({baseColor:n,highlightColor:l,width:x,height:m,borderRadius:u,circle:r,direction:i,duration:o,enableAnimation:p=$,customHighlightBackground:a}){const s={};return i==="rtl"&&(s["--animation-direction"]="reverse"),typeof o=="number"&&(s["--animation-duration"]=`${o}s`),p||(s["--pseudo-element-display"]="none"),(typeof x=="string"||typeof x=="number")&&(s.width=x),(typeof m=="string"||typeof m=="number")&&(s.height=m),(typeof u=="string"||typeof u=="number")&&(s.borderRadius=u),r&&(s.borderRadius="50%"),typeof n<"u"&&(s["--base-color"]=n),typeof l<"u"&&(s["--highlight-color"]=l),typeof a=="string"&&(s["--custom-highlight-background"]=a),s}function w({count:n=1,wrapper:l,className:x,containerClassName:m,containerTestId:u,circle:r=!1,style:i,...o}){var p,a,s;const t=g.useContext(O),c={...o};for(const[y,f]of Object.entries(o))typeof f>"u"&&delete c[y];const b={...t,...c,circle:r},N={...i,...K(b)};let j="react-loading-skeleton";x&&(j+=` ${x}`);const L=(p=b.inline)!==null&&p!==void 0?p:!1,k=[],S=Math.ceil(n);for(let y=0;y<S;y++){let f=N;if(S>n&&y===S-1){const v=(a=f.width)!==null&&a!==void 0?a:"100%",P=n%1,_=typeof v=="number"?v*P:`calc(${v} * ${P})`;f={...f,width:_}}const C=g.createElement("span",{className:j,style:f,key:y},"‌");L?k.push(C):k.push(g.createElement(g.Fragment,{key:y},C,g.createElement("br",null)))}return g.createElement("span",{className:m,"data-testid":u,"aria-live":"polite","aria-busy":(s=b.enableAnimation)!==null&&s!==void 0?s:$},l?k.map((y,f)=>g.createElement(l,{key:f},y)):k)}const E=({active:n,direction:l})=>n?e.jsx("span",{className:"ml-1 inline-block",children:l==="asc"?"▲":"▼"}):null;function R({assets:n,isLoading:l,hasNextPage:x,isFetchingNextPage:m,fetchNextPage:u,sortField:r,sortDirection:i,setSortField:o,setSortDirection:p}){const a=t=>{r===t?p(i===h.Asc?h.Desc:h.Asc):(o(t),p(h.Asc))},s=(t,c)=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),a(c))};return e.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-900",children:[e.jsxs("table",{className:"w-full table-auto text-left text-sm text-gray-800 dark:text-gray-100",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-[68px] border-b border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-800",children:[e.jsxs("th",{className:"cursor-pointer select-none rounded-tl-2xl px-6 py-4 text-xs font-semibold uppercase tracking-wide",onClick:()=>a(d.Name),role:"button","aria-sort":r===d.Name?i===h.Asc?"ascending":"descending":"none",tabIndex:0,onKeyDown:t=>s(t,d.Name),children:["Name",e.jsx(E,{active:r===d.Name,direction:i})]}),e.jsxs("th",{className:"cursor-pointer select-none px-6 py-4 text-xs font-semibold uppercase tracking-wide",onClick:()=>a(d.Price),role:"button","aria-sort":r===d.Price?i===h.Asc?"ascending":"descending":"none",tabIndex:0,onKeyDown:t=>s(t,d.Price),children:["Price (USD)",e.jsx(E,{active:r===d.Price,direction:i})]}),e.jsx("th",{className:"rounded-tr-2xl px-6 py-4 text-xs font-semibold uppercase tracking-wide",children:"Buy/Sell"})]})}),e.jsx("tbody",{children:l?Array.from({length:10}).map((t,c)=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{circle:!0,width:28,height:28}),e.jsx(w,{width:100,height:18})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(w,{width:60,height:18})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(w,{width:80,height:18})})]},c)):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-gray-500 dark:text-gray-400",children:"No data available."})}):n.map(t=>e.jsxs("tr",{className:"group border-b border-gray-100 transition-colors hover:bg-gray-50 dark:border-gray-800 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.image,alt:`${t.name} logo`,className:"h-7 w-7 rounded-full border border-gray-300 shadow-sm dark:border-gray-700"}),e.jsx("span",{className:"text-sm font-medium",children:t.name})]})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-700 dark:text-gray-300",children:["$",t.current_price.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs(D,{defaultValue:"",onChange:c=>alert(`You selected ${c.target.value} for ${t.name}`),children:[e.jsx("option",{value:"",disabled:!0,children:"Buy/Sell"}),e.jsx("option",{value:"buy",children:"Buy"}),e.jsx("option",{value:"sell",children:"Sell"})]})})]},t.id))})]}),x&&e.jsx("div",{className:"flex justify-center py-6",children:e.jsx(B,{onClick:()=>u(),disabled:m,className:"rounded-lg bg-blue-600 px-6 py-2 font-medium text-white transition hover:bg-blue-700",children:m?"Loading...":"Show More"})})]})}function I(){const{data:n,fetchNextPage:l,hasNextPage:x,isFetchingNextPage:m,isLoading:u}=M(),[r,i]=A.useState(d.Name),[o,p]=A.useState(h.Asc),a=(n==null?void 0:n.pages.flat())??[],s=A.useMemo(()=>{const t=[...a];return t.sort((c,b)=>{const N=r===d.Price?Number(c[r]):String(c[r]).toLowerCase(),j=r===d.Price?Number(b[r]):String(b[r]).toLowerCase();return N<j?o===h.Asc?-1:1:N>j?o===h.Asc?1:-1:0}),t},[a,r,o]);return e.jsx(R,{assets:s,isLoading:u,hasNextPage:x,isFetchingNextPage:m,fetchNextPage:l,sortField:r,sortDirection:o,setSortField:i,setSortDirection:p})}export{I as default};
