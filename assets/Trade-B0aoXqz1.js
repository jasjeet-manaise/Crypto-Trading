import{j as e,c as j,r as o,I as u,B as N,u as b,L as v}from"./index-B1PsHpJ9.js";import{c as r,b as C,u as S}from"./useMarketAssets-DvIcj7az.js";function w({children:a,className:s}){return e.jsx("div",{className:j("space-y-4 rounded-xl bg-white p-6 shadow-sm dark:bg-gray-800",s),children:a})}function F(a){const s=(a==null?void 0:a.pages.flat())??[],[l,d]=o.useState("bitcoin"),[n,h]=o.useState(r.CryptoToFiat),[c,m]=o.useState(""),[i,g]=o.useState(""),x=o.useMemo(()=>s.find(t=>t.id===l),[l,s]),p=(x==null?void 0:x.current_price)??0;o.useEffect(()=>{if(p)if(n===r.CryptoToFiat){const t=parseFloat(c);g(isNaN(t)?"":(t*p).toFixed(2))}else{const t=parseFloat(i);m(isNaN(t)?"":(t/p).toFixed(6))}},[c,i,p,n]);const y=e.jsx(C,{value:l,onChange:t=>d(t.target.value),className:"min-w-[120px]",children:s.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}),f=e.jsxs(w,{className:"space-y-6 border border-gray-200 p-6 shadow-md dark:border-gray-700",children:[e.jsx("h1",{className:"text-center text-2xl font-semibold text-gray-800 dark:text-white",children:"Trade Crypto"}),n===r.CryptoToFiat?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{type:"number",value:c,onChange:t=>m(t.target.value),placeholder:"Crypto Amount",className:"flex-1"}),y]}):e.jsxs("div",{className:"relative w-full",children:[e.jsx(u,{type:"number",value:i,onChange:t=>g(t.target.value),placeholder:"USD Amount",className:"w-full pr-12"}),e.jsx("span",{className:"absolute right-6 top-1/2 -translate-y-1/2 transform text-sm text-gray-500",children:"USD"})]}),e.jsx("div",{className:"text-center",children:e.jsx(N,{variant:"ghost",className:"text-blue-600 hover:text-blue-800",onClick:()=>h(t=>t===r.CryptoToFiat?r.FiatToCrypto:r.CryptoToFiat),children:"â†• Swap"})}),n===r.FiatToCrypto?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{type:"number",value:c,readOnly:!0,placeholder:"Crypto Amount",className:"flex-1 bg-gray-100 dark:bg-gray-700"}),y]}):e.jsxs("div",{className:"relative w-full",children:[e.jsx(u,{type:"number",value:i,readOnly:!0,placeholder:"USD Amount",className:"w-full bg-gray-100 pr-12 dark:bg-gray-700"}),e.jsx("span",{className:"absolute right-5 top-1/2 -translate-y-1/2 transform text-sm text-gray-500",children:"USD"})]})]});return e.jsx("div",{className:"mx-auto mt-10 max-w-xl px-4",children:f})}function k(){var l;const{data:a,isLoading:s}=S({getAll:!0});return o.useEffect(()=>{const{isSessionExpired:d,logout:n}=b.getState();d()&&(n(),alert("Please log in again."))},[]),s?e.jsx(v,{}):e.jsx(F,{pages:((l=a==null?void 0:a.pages)==null?void 0:l.flat())??[]})}export{k as default};
