import{j as e,b as N,r as n,I as d,d as b,B as w,u as C,L as S}from"./index-4MXQuX8U.js";import{b as o,u as F}from"./useMarketAssets-DZrZYkWE.js";function T({children:a,className:s}){return e.jsx("div",{className:N("space-y-4 rounded-xl bg-white p-6 shadow-sm dark:bg-gray-800",s),children:a})}function I(a){return e.jsx("select",{...a,className:"w-full cursor-pointer rounded border border-gray-300 bg-white p-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"})}function k(a){const s=(a==null?void 0:a.pages.flat())??[],[l,m]=n.useState("bitcoin"),[i,v]=n.useState(o.CryptoToFiat),[c,f]=n.useState(""),[u,y]=n.useState(""),x=n.useMemo(()=>s.find(t=>t.id===l),[l,s]),p=(x==null?void 0:x.current_price)??0;n.useEffect(()=>{if(p)if(i===o.CryptoToFiat){const t=parseFloat(c);y(isNaN(t)?"":(t*p).toFixed(2))}else{const t=parseFloat(u);f(isNaN(t)?"":(t/p).toFixed(6))}},[c,u,p,i]);const h=e.jsx(I,{value:l,onChange:t=>m(t.target.value),className:"min-w-[120px]",children:s.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}),j=e.jsxs(T,{className:"space-y-6 border border-gray-200 p-6 shadow-md dark:border-gray-700",children:[e.jsx("h1",{className:"text-center text-2xl font-semibold text-gray-800 dark:text-white",children:"Trade Crypto"}),i===o.CryptoToFiat?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{type:"number",min:"0",value:c,onChange:t=>{const r=t.target.value,g=parseFloat(r);r===""||g>=0?f(r):b.warning("Please enter a positive value.")},placeholder:"Crypto Amount",className:"flex-1"}),h]}):e.jsxs("div",{className:"relative w-full",children:[e.jsx(d,{type:"number",min:"0",value:u,onChange:t=>{const r=t.target.value,g=parseFloat(r);r===""||g>=0?y(r):b.warning("Please enter a positive value.")},placeholder:"USD Amount",className:"w-full pr-12"}),e.jsx("span",{className:"absolute right-6 top-1/2 -translate-y-1/2 transform text-sm text-gray-500",children:"USD"})]}),e.jsx("div",{className:"text-center",children:e.jsx(w,{variant:"ghost",className:"text-blue-600 hover:text-blue-800",onClick:()=>v(t=>t===o.CryptoToFiat?o.FiatToCrypto:o.CryptoToFiat),children:"â†• Swap"})}),i===o.FiatToCrypto?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{type:"number",min:"0",value:c,readOnly:!0,placeholder:"Crypto Amount",className:"flex-1 bg-gray-100 dark:bg-gray-700"}),h]}):e.jsxs("div",{className:"relative w-full",children:[e.jsx(d,{type:"number",min:"0",value:u,readOnly:!0,placeholder:"USD Amount",className:"w-full bg-gray-100 pr-12 dark:bg-gray-700"}),e.jsx("span",{className:"absolute right-5 top-1/2 -translate-y-1/2 transform text-sm text-gray-500",children:"USD"})]})]});return e.jsx("div",{className:"mx-auto mt-10 max-w-xl px-4",children:j})}function M(){var l;const{data:a,isLoading:s}=F({getAll:!0});return n.useEffect(()=>{const{isSessionExpired:m,logout:i}=C.getState();m()&&(i(),alert("Please log in again."))},[]),s?e.jsx(S,{}):e.jsx(k,{pages:((l=a==null?void 0:a.pages)==null?void 0:l.flat())??[]})}export{M as default};
